(this["webpackJsonpreact-kanban-hooks"]=this["webpackJsonpreact-kanban-hooks"]||[]).push([[0],{14:function(e,t,n){e.exports={toolbar:"Toolbar_toolbar__3BG8J",right:"Toolbar_right__3ItuG",kanban:"Toolbar_kanban__3MvL0"}},16:function(e,t,n){e.exports={auth:"Auth_auth__IdtOT",rightX:"Auth_rightX__2YET4"}},27:function(e,t,n){e.exports={naviItem:"NaviItem_naviItem__1JpnJ"}},28:function(e,t,n){e.exports={input:"Input_input__HkNJD"}},29:function(e,t,n){e.exports={buttonCol:"Button_buttonCol__2B-wr",buttonGreen:"Button_buttonGreen__31YEf",buttonRed:"Button_buttonRed__2CAlo"}},30:function(e,t,n){e.exports={modal:"Modal_modal__30MRu"}},31:function(e,t,n){e.exports={backdrop:"BackDrop_backdrop__3kMM4"}},32:function(e,t,n){e.exports={dialog:"Dialog_dialog__qnKKC"}},39:function(e,t,n){},40:function(e,t,n){},6:function(e,t,n){e.exports={label:"ExistingColumn_label__3Jyut",header:"ExistingColumn_header__2Qcb7",right:"ExistingColumn_right__PwONT",left:"ExistingColumn_left__wE5Pr",flexGrow:"ExistingColumn_flexGrow__1u7kE",adding:"ExistingColumn_adding__QEQ_s",drop:"ExistingColumn_drop__27Q69"}},68:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),i=n(10),s=n.n(i),r=(n(39),n(2)),l=(n(40),n(14)),o=n.n(l),u=n(27),d=n.n(u),j=n(1),b=function(e){return Object(j.jsx)("div",{className:d.a.naviItem,onClick:e.click,children:Object(j.jsx)("p",{children:e.text})})},O=n(16),h=n.n(O),f=n(28),x=n.n(f),m=function(e){return Object(j.jsx)("input",{className:x.a.input,type:e.type,value:e.value,onChange:e.onChange,placeholder:e.placeholder})},g=n(29),p=n.n(g),k=function(e){return Object(j.jsx)("button",{className:p.a[e.classes],onClick:e.click,disabled:e.disabled,children:e.children})},_=c.a.createContext({isAuth:!1,userId:null,token:null,expirationDate:null}),v=n(12),y=n.n(v),N={token:null,userId:null,error:null,time:null,email:null,loading:!1},C=function(e,t){switch(t.type){case"SEND":return{token:null,userId:null,error:null,time:null,email:null,loading:!0};case"RESPONSE":return{token:t.token,userId:t.userId,error:null,time:t.time,email:t.email,loading:!1};case"ERROR":return{error:t.error,loading:!1};case"LOGOUT":return{token:null,userId:null,error:null,time:null,email:null,loading:!1}}},I=function(){var e=Object(a.useReducer)(C,N),t=Object(r.a)(e,2),n=t[0],c=t[1];return{sendAuth:function(e,t){c({type:"SEND"}),y.a.post(e,t).then((function(e){c({type:"RESPONSE",token:e.data.idToken,time:new Date((new Date).getTime()+1e3*e.data.expiresIn-2e3),email:e.data.email,userId:e.data.localId})})).catch((function(e){c({type:"ERROR",error:e.message})}))},error:n.error,token:n.token,time:n.time,email:n.email,userId:n.userId,loading:n.loading,logout:function(){c({type:"LOGOUT"}),console.log(n.userId)}}},T=function(e){var t=Object(a.useContext)(_),n=Object(a.useState)(""),i=Object(r.a)(n,2),s=i[0],l=i[1],o=Object(a.useState)(""),u=Object(r.a)(o,2),d=u[0],b=u[1],O=Object(a.useState)(""),f=Object(r.a)(O,2),x=f[0],g=f[1],p=Object(a.useState)(!1),v=Object(r.a)(p,2),y=v[0],N=v[1],C=I(),T=C.sendAuth,S=C.error,E=C.token,A=C.time,D=C.email,w=C.userId,R=C.loading,P=Object(a.useCallback)((function(e,n,a,c){t.loginOn(e,n,a,c)}),[]);Object(a.useEffect)((function(){e.registration?N(d===x&&d.length>5&&""!==s):N(d.length>5&&""!==s)})),Object(a.useEffect)((function(){w&&P(w,E,A,D),console.log(w)}),[w,E,A,D,P]),console.log("rendering");return!t.userId&&Object(j.jsx)("div",{className:h.a.auth,children:R?Object(j.jsx)("p",{children:"Oczekujemy na serwer!"}):Object(j.jsxs)(c.a.Fragment,{children:[Object(j.jsx)("span",{onClick:e.clickX,className:h.a.rightX,children:"\u2612"}),S&&Object(j.jsx)("p",{style:{color:"red"},children:"Podano B\u0142\u0119dne dane spr\xf3buj jeszcze raz."}),Object(j.jsx)("p",{children:"Login:"}),Object(j.jsx)(m,{value:s,onChange:function(e){return l(e.target.value)},type:"text"}),Object(j.jsx)("p",{children:"Has\u0142o:"}),Object(j.jsx)(m,{value:d,onChange:function(e){return b(e.target.value)},type:"password"}),e.registration&&Object(j.jsxs)(c.a.Fragment,{children:[Object(j.jsx)("p",{children:"Powt\xf3rz Has\u0142o:"}),Object(j.jsx)(m,{value:x,onChange:function(e){return g(e.target.value)},type:"password"}),d!==x&&Object(j.jsx)("p",{style:{color:"red"},children:"Has\u0142a nie s\u0105 identyczne"}),d.length<6&&Object(j.jsx)("p",{style:{color:"red"},children:"Minimum 6 znak\xf3w"})]}),Object(j.jsx)(k,{classes:"buttonGreen",disabled:!y,click:function(){var t={email:s,password:d,returnSecureToken:!0};if(e.registration){T("https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyCE9iNHzKkGA9SWX9TD4JvTXBEtyCxovdA",t)}else{T("https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyCE9iNHzKkGA9SWX9TD4JvTXBEtyCxovdA",t)}},children:e.registration?"Zarejestruj":"Zaloguj"})]})})},S=c.a.memo(T),E=function(){var e=Object(a.useContext)(_),t=Object(a.useState)(!1),n=Object(r.a)(t,2),i=n[0],s=n[1],l=Object(a.useState)(!1),u=Object(r.a)(l,2),d=u[0],O=u[1];return Object(a.useEffect)((function(){e.expirationDate&&(console.log(e.expirationDate.getTime()-(new Date).getTime()),setTimeout((function(){e.loginOff()}),e.expirationDate.getTime()-(new Date).getTime()))}),[e.expirationDate]),Object(j.jsxs)("div",{className:o.a.toolbar,children:[Object(j.jsx)("span",{className:o.a.kanban,children:"JAPAN KANBAN"}),e.isAuth?Object(j.jsxs)(c.a.Fragment,{children:[Object(j.jsx)(b,{text:"Wyloguj",click:function(){e.loginOff()}}),Object(j.jsx)("span",{className:o.a.right,children:e.email})]}):Object(j.jsxs)(c.a.Fragment,{children:[Object(j.jsx)(b,{text:"Zaloguj",click:function(){s(!1),O(!0)}}),Object(j.jsx)(b,{text:"Zarejestruj",click:function(){s(!0),O(!0)}})]}),d&&Object(j.jsx)(S,{registration:i,clickX:function(){return O(!1)}})]})},A=n(4),D=n(3),w=n(9),R=n.n(w),P=n(6),B=n.n(P),z=n(7),G=n(8),L=n.n(G),F=n(30),K=n.n(F),Z=n(31),H=n.n(Z),J=function(e){return Object(j.jsx)("div",{className:H.a.backdrop,onClick:e.click,children:e.children})},X=function(e){return Object(j.jsxs)("div",{children:[Object(j.jsx)(J,{click:e.cancel}),Object(j.jsxs)("div",{className:K.a.modal,children:[Object(j.jsxs)("h1",{children:[e.alert,"?"]}),Object(j.jsxs)("div",{children:[Object(j.jsx)(k,{classes:e.clLeft,click:e.ok,children:e.left}),Object(j.jsx)(k,{classes:e.clRight,click:e.cancel,children:e.right})]})]})]})},U=n(32),M=n.n(U),W=function(e){var t=Object(a.useState)(e.name),n=Object(r.a)(t,2),c=n[0],i=n[1];return Object(j.jsxs)("div",{children:[Object(j.jsx)(J,{click:e.cancel}),Object(j.jsxs)("div",{className:M.a.dialog,children:[Object(j.jsxs)("h1",{children:[e.alert,"?"]}),Object(j.jsx)(m,{type:"text",value:c,onChange:function(e){return i(e.target.value)},placeholder:"nowa nazwa listy"}),Object(j.jsxs)("div",{children:[Object(j.jsx)(k,{classes:e.clLeft,click:function(){e.ok(e.identy,c,e.identyTask),e.cancel()},children:e.left}),Object(j.jsx)(k,{classes:e.clRight,click:e.cancel,children:e.right})]})]})]})},Q=function(e){var t=Object(a.useState)(!1),n=Object(r.a)(t,2),c=n[0],i=n[1],s=Object(a.useState)(!1),l=Object(r.a)(s,2),o=l[0],u=l[1],d=Object(a.useState)(!1),b=Object(r.a)(d,2),O=b[0],h=b[1];return Object(j.jsx)(z.b,{draggableId:e.identyTask,index:e.index,children:function(t,n){return Object(j.jsxs)("div",Object(A.a)(Object(A.a)({className:L.a.task},t.draggableProps),{},{ref:t.innerRef,style:Object(A.a)(Object(A.a)({},t.draggableProps.style),{},{userSelect:"none",backgroundColor:n.isDragging?"#FFFAB4":"#F0D892"}),children:[Object(j.jsxs)("header",{className:L.a.header,children:[Object(j.jsx)("span",Object(A.a)(Object(A.a)({className:L.a.left},t.dragHandleProps),{},{children:"\u2630"})),Object(j.jsx)("span",{onClick:function(){return u(!0)},className:L.a.right,children:"\u2612"}),Object(j.jsx)("span",{className:L.a.right,onClick:function(){return h(!0)},children:"..."})]}),Object(j.jsx)("input",{className:L.a.Checkbox,type:"checkbox",checked:c,onChange:function(e){i(e.target.checked)}}),Object(j.jsx)("p",{className:c?L.a.line:null,children:e.name}),o&&Object(j.jsx)(X,{alert:"Usun\u0105\u0107 Zadanie: ".concat(e.name,"?"),ok:function(){return e.removeTask(e.identyList,e.identyTask)},cancel:function(){return u(!1)},left:"Usu\u0144",clLeft:"buttonRed",right:"Anuluj",clRight:"buttonGreen"}),O&&Object(j.jsx)(W,{alert:"Edycja Zadania: ".concat(e.name,"?"),ok:e.editTaskName,cancel:function(){return h(!1)},left:"Zmie\u0144",clLeft:"buttonRed",right:"Anuluj",clRight:"buttonGreen",identy:e.identyList,identyTask:e.identyTask,name:e.name})]}))}},e.identyTask)},V=c.a.memo(Q),q=function(e){var t=Object(a.useState)(""),n=Object(r.a)(t,2),c=n[0],i=n[1],s=Object(a.useState)(!1),l=Object(r.a)(s,2),o=l[0],u=l[1],d=Object(a.useState)(!1),b=Object(r.a)(d,2),O=b[0],h=b[1];return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("header",{className:B.a.header,children:[Object(j.jsx)("span",Object(A.a)(Object(A.a)({className:B.a.left},e.dragHandleProps),{},{children:"\u2630"})),Object(j.jsx)("span",{onClick:function(){return u(!0)},className:B.a.right,children:"\u2612"}),Object(j.jsx)("span",{className:B.a.right,onClick:function(){return h(!0)},children:"..."}),Object(j.jsx)("p",{className:B.a.label,children:e.name})]}),Object(j.jsx)(z.c,{droppableId:e.identy,type:"task",children:function(t,n){return Object(j.jsxs)("div",Object(A.a)(Object(A.a)({className:B.a.drop},t.droppableProps),{},{ref:t.innerRef,style:{backgroundColor:n.isDraggingOver?"#C87550":"#EA9772"},children:[e.tasks.map((function(t,n){return Object(j.jsx)(V,{name:t.name,identyList:e.identy,identyTask:t.id,removeTask:e.removeTask,index:n,editTaskName:e.editTaskName},t.id)})),t.placeholder]}))}},e.identy),Object(j.jsx)("div",{className:B.a.flexGrow,children:Object(j.jsxs)("div",{className:B.a.adding,children:[Object(j.jsx)(m,{type:"text",value:c,onChange:function(e){return i(e.target.value)},placeholder:"nazwa zadania"}),Object(j.jsx)(k,{click:function(){e.addTask(e.identy,c),i("")},classes:"buttonCol",disabled:""===c,children:"Dodaj Zadanie"})]})}),o&&Object(j.jsx)(X,{alert:"Usun\u0105\u0107 Liste ".concat(e.name,"?"),ok:function(){return e.removeColumn(e.identy)},cancel:function(){return u(!1)},left:"Usu\u0144",clLeft:"buttonRed",right:"Anuluj",clRight:"buttonGreen"}),O&&Object(j.jsx)(W,{alert:"Edycja Listy ".concat(e.name,"?"),ok:e.editColumnName,cancel:function(){return h(!1)},left:"Zmie\u0144",clLeft:"buttonRed",right:"Anuluj",clRight:"buttonGreen",identy:e.identy,name:e.name})]})},Y=c.a.memo(q),$=function(e){var t=Object(a.useState)(""),n=Object(r.a)(t,2),i=n[0],s=n[1];return Object(j.jsxs)(c.a.Fragment,{children:[Object(j.jsx)(m,{type:"text",value:i,onChange:function(e){return s(e.target.value)},placeholder:"nazwa kolumny"}),Object(j.jsx)(k,{click:function(){e.add(i),s("")},classes:"buttonCol",disabled:""===i,children:"Dodaj Kolumne"})]})},ee=function(){var e=Object(a.useState)(!1),t=Object(r.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(!1),s=Object(r.a)(i,2),l=s[0],o=s[1],u=Object(a.useState)(null),d=Object(r.a)(u,2),j=d[0],b=d[1],O=Object(a.useState)(null),h=Object(r.a)(O,2),f=h[0],x=h[1],m=Object(a.useState)(null),g=Object(r.a)(m,2),p=g[0],k=g[1],_=Object(a.useState)(null),v=Object(r.a)(_,2),N=v[0],C=v[1];return{saveData:function(e,t,n){c(!0),b(null),x(null),k(null),C(null),y.a.put("https://kanban-hooks-default-rtdb.firebaseio.com/users/".concat(e,".json?auth=").concat(n),t).then((function(e){b(e),c(!1)})).catch((function(e){x(e),c(!1)}))},fatchData:function(e,t){o(!0),k(null),C(null),b(null),x(null),y.a.get("https://kanban-hooks-default-rtdb.firebaseio.com/users/".concat(e,".json?auth=").concat(t)).then((function(e){k(e),o(!1)})).catch((function(e){C(e),o(!1)}))},responseSend:j,errorSend:f,responseFatch:p,errorFatch:N,sending:n,fatching:l}},te=function(){console.log("Kanban Rendering");var e=Object(a.useContext)(_),t=Object(a.useState)([]),n=Object(r.a)(t,2),i=n[0],s=n[1],l=function(e){var t=Object(D.a)(i);t.push({name:e,id:e+(new Date).getTime(),order:t.length,tasks:[]}),s(Object(D.a)(t))},o=function(e){var t=Object(D.a)(i),n=i.findIndex((function(t){return e===t.id}));t.splice(n,1),s(Object(D.a)(t))},u=function(e,t){var n=i.findIndex((function(t){return e===t.id})),a=Object(D.a)(i),c=Object(D.a)(a[n].tasks);c.push({name:t,id:t+(new Date).getTime(),order:a[n].tasks.length}),a[n].tasks=Object(D.a)(c),s(Object(D.a)(a))},d=function(e,t){var n=i.findIndex((function(t){return e===t.id})),a=Object(D.a)(i),c=a[n].tasks.findIndex((function(e){return t===e.id})),r=Object(D.a)(a[n].tasks);r.splice(c,1),a[n].tasks=Object(D.a)(r),s(Object(D.a)(a))},b=function(e,t){var n=i.findIndex((function(t){return e===t.id})),a=Object(D.a)(i);a[n].name=t,s(Object(D.a)(a))},O=function(e,t,n){var a=i.findIndex((function(t){return e===t.id})),c=Object(D.a)(i),r=c[a].tasks.findIndex((function(e){return n===e.id})),l=Object(D.a)(c[a].tasks);l[r].name=t,c[a].tasks=Object(D.a)(l),s(Object(D.a)(c))},h=ee(),f=h.saveData,x=h.fatchData,m=h.sending,g=h.errorSend,p=h.responseSend,k=h.fatching,v=h.errorFatch,y=h.responseFatch;return Object(a.useEffect)((function(){e.isAuth&&f(e.userId,i,e.token)}),[i]),Object(a.useEffect)((function(){e.isAuth&&x(e.userId,e.token)}),[e.isAuth]),Object(a.useEffect)((function(){if(y&&y.data){console.log(y.data);var e=Object(D.a)(y.data);e.map((function(e){return e.tasks||(e.tasks=[]),!1})),console.log(e),s(e)}}),[y]),Object(j.jsx)("div",{className:R.a.mainBox,children:e.isAuth&&Object(j.jsxs)(c.a.Fragment,{children:[Object(j.jsx)(z.a,{onDragEnd:function(e){return function(e,t,n){var a=e.source,c=e.destination,i=e.type;if(c){if("task"!==i){console.log(e);var s=Object(D.a)(t),l=s.splice(a.index,1),o=Object(r.a)(l,1)[0];return s.splice(c.index,0,o),void n(Object(D.a)(s))}if(a.droppableId===c.droppableId){var u=t.findIndex((function(e){return e.id===a.droppableId})),d=Object(D.a)(t),j=Object(D.a)(d[u].tasks),b=j.splice(a.index,1),O=Object(r.a)(b,1)[0];j.splice(c.index,0,O),d[u].tasks=Object(D.a)(j),n(Object(D.a)(d))}else{var h=t.findIndex((function(e){return e.id===a.droppableId})),f=t.findIndex((function(e){return e.id===c.droppableId})),x=Object(D.a)(t),m=Object(D.a)(x[h].tasks),g=Object(D.a)(x[f].tasks),p=m.splice(a.index,1),k=Object(r.a)(p,1)[0];g.splice(c.index,0,k),x[h].tasks=Object(D.a)(m),x[f].tasks=Object(D.a)(g),n(Object(D.a)(x))}}}(e,i,s)},children:Object(j.jsx)(z.c,{droppableId:"main",type:"column",direction:"horizontal",children:function(e,t){return Object(j.jsxs)("div",Object(A.a)(Object(A.a)({className:R.a.kanban},e.droppableProps),{},{ref:e.innerRef,style:{},children:[i.map((function(e,t){return Object(j.jsx)(z.b,{draggableId:e.id,index:t,children:function(t,n){return Object(j.jsx)("div",Object(A.a)(Object(A.a)({className:R.a.column},t.draggableProps),{},{ref:t.innerRef,style:Object(A.a)(Object(A.a)({},t.draggableProps.style),{},{userSelect:"none",backgroundColor:n.isDragging?"#fba883":"#EA9772"}),children:Object(j.jsx)(Y,{dragHandleProps:t.dragHandleProps,identy:e.id,name:e.name,tasks:e.tasks,addTask:u,removeTask:d,removeColumn:o,editColumnName:b,editTaskName:O},e.id)}))}},e.id)})),e.placeholder,Object(j.jsx)("div",{className:R.a.columnAdd,children:Object(j.jsx)("div",{className:R.a.itemNew,children:Object(j.jsx)($,{add:l})})})]}))}})}),Object(j.jsxs)("div",{className:R.a.infoBox,children:[m&&"Zapisuje zmiany...",p&&"Zapisano zmiany",g&&Object(j.jsx)("span",{style:{color:"red"},children:"'Zmian nie uda\u0142o si\u0119 zapisa\u0107!'"}),k&&"Pobieram Dane...",y&&"Dane Pobrane",v&&"Danych nie uda\u0142o si\u0119 pobra\u0107"]})]})})},ne=c.a.memo(te);var ae=function(){var e=Object(a.useState)(!1),t=Object(r.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(null),s=Object(r.a)(i,2),l=s[0],o=s[1],u=Object(a.useState)(null),d=Object(r.a)(u,2),b=d[0],O=d[1],h=Object(a.useState)(null),f=Object(r.a)(h,2),x=f[0],m=f[1],g=Object(a.useState)(null),p=Object(r.a)(g,2),k=p[0],v=p[1];return Object(j.jsx)(_.Provider,{value:{isAuth:n,userId:l,token:b,expirationDate:x,email:k,loginOn:function(e,t,n,a){c(!0),o(e),O(t),m(n),v(a)},loginOff:function(){c(!1),o(null),O(null),m(null),v(null)}},children:Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(E,{}),Object(j.jsx)(ne,{})]})})};s.a.render(Object(j.jsx)(ae,{}),document.getElementById("root"))},8:function(e,t,n){e.exports={task:"Task_task__1IAtP",Checkbox:"Task_Checkbox__3cBkW",line:"Task_line__1Vjz-",header:"Task_header__6BdSV",right:"Task_right__3l3Gl",left:"Task_left__3dgkP"}},9:function(e,t,n){e.exports={mainBox:"Kanban_mainBox__BCgyx",kanban:"Kanban_kanban__2WLUc",column:"Kanban_column__2Cq7V",columnAdd:"Kanban_columnAdd__eQ6MC",itemNew:"Kanban_itemNew__2BkD7",infoBox:"Kanban_infoBox__2Ww4_"}}},[[68,1,2]]]);
//# sourceMappingURL=main.e341abcd.chunk.js.map