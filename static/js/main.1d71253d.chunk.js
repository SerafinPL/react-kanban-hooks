(this["webpackJsonpreact-kanban-hooks"]=this["webpackJsonpreact-kanban-hooks"]||[]).push([[0],{10:function(e,t,n){e.exports={task:"Task_task__1IAtP",line:"Task_line__1Vjz-",header:"Task_header__6BdSV",right:"Task_right__3l3Gl",left:"Task_left__3dgkP"}},14:function(e,t,n){e.exports={toolbar:"Toolbar_toolbar__3BG8J",right:"Toolbar_right__3ItuG",kanban:"Toolbar_kanban__3MvL0"}},16:function(e,t,n){e.exports={auth:"Auth_auth__1gMqw",rightX:"Auth_rightX__1WgFo"}},17:function(e,t,n){e.exports={backdrop:"Modal_backdrop__3iXHD",modal:"Modal_modal__30MRu"}},28:function(e,t,n){e.exports={naviItem:"NaviItem_naviItem__1JpnJ"}},29:function(e,t,n){e.exports={input:"Input_input__HkNJD"}},30:function(e,t,n){e.exports={buttonCol:"Button_buttonCol__2B-wr",buttonGreen:"Button_buttonGreen__31YEf",buttonRed:"Button_buttonRed__2CAlo"}},37:function(e,t,n){},38:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),s=n(9),i=n.n(s),r=(n(37),n(2)),l=(n(38),n(14)),o=n.n(l),u=n(28),d=n.n(u),j=n(1),b=function(e){return Object(j.jsx)("div",{className:d.a.naviItem,onClick:e.click,children:Object(j.jsx)("p",{children:e.text})})},O=n(16),h=n.n(O),f=n(29),x=n.n(f),g=function(e){return Object(j.jsx)("input",{className:x.a.input,type:e.type,value:e.value,onChange:e.onChange,placeholder:e.placeholder})},p=n(30),m=n.n(p),k=function(e){return Object(j.jsx)("button",{className:m.a[e.classes],onClick:e.click,disabled:e.disabled,children:e.children})},_=c.a.createContext({isAuth:!1,userId:null,token:null,expirationDate:null}),v=n(12),y=n.n(v),I={token:null,userId:null,error:null,time:null,email:null,loading:!1},N=function(e,t){switch(t.type){case"SEND":return{token:null,userId:null,error:null,time:null,email:null,loading:!0};case"RESPONSE":return{token:t.token,userId:t.userId,error:null,time:t.time,email:t.email,loading:!1};case"ERROR":return{error:t.error,loading:!1};case"LOGOUT":return{token:null,userId:null,error:null,time:null,email:null,loading:!1}}},C=function(){var e=Object(a.useReducer)(N,I),t=Object(r.a)(e,2),n=t[0],c=t[1];return{sendAuth:function(e,t){c({type:"SEND"}),y.a.post(e,t).then((function(e){c({type:"RESPONSE",token:e.data.idToken,time:new Date((new Date).getTime()+1e3*e.data.expiresIn-2e3),email:e.data.email,userId:e.data.localId})})).catch((function(e){c({type:"ERROR",error:e.message})}))},error:n.error,token:n.token,time:n.time,email:n.email,userId:n.userId,loading:n.loading,logout:function(){c({type:"LOGOUT"}),console.log(n.userId)}}},S=function(e){var t=Object(a.useContext)(_),n=Object(a.useState)(""),s=Object(r.a)(n,2),i=s[0],l=s[1],o=Object(a.useState)(""),u=Object(r.a)(o,2),d=u[0],b=u[1],O=Object(a.useState)(""),f=Object(r.a)(O,2),x=f[0],p=f[1],m=Object(a.useState)(!1),v=Object(r.a)(m,2),y=v[0],I=v[1],N=C(),S=N.sendAuth,T=N.error,D=N.token,E=N.time,A=N.email,w=N.userId,P=N.loading,R=Object(a.useCallback)((function(e,n,a,c){t.loginOn(e,n,a,c)}),[]);Object(a.useEffect)((function(){e.registration?I(d===x&&d.length>5&&""!==i):I(d.length>5&&""!==i)})),Object(a.useEffect)((function(){w&&R(w,D,E,A),console.log(w)}),[w,D,E,A,R]),console.log("rendering");return!t.userId&&Object(j.jsx)("div",{className:h.a.auth,children:P?Object(j.jsx)("p",{children:"Oczekujemy na serwer!"}):Object(j.jsxs)(c.a.Fragment,{children:[Object(j.jsx)("span",{onClick:e.clickX,className:h.a.rightX,children:"\u2612"}),T&&Object(j.jsx)("p",{style:{color:"red"},children:"Podano B\u0142\u0119dne dane spr\xf3buj jeszcze raz."}),Object(j.jsx)("p",{children:"Login:"}),Object(j.jsx)(g,{value:i,onChange:function(e){return l(e.target.value)},type:"text"}),Object(j.jsx)("p",{children:"Has\u0142o:"}),Object(j.jsx)(g,{value:d,onChange:function(e){return b(e.target.value)},type:"password"}),e.registration&&Object(j.jsxs)(c.a.Fragment,{children:[Object(j.jsx)("p",{children:"Powt\xf3rz Has\u0142o:"}),Object(j.jsx)(g,{value:x,onChange:function(e){return p(e.target.value)},type:"password"}),d!==x&&Object(j.jsx)("p",{style:{color:"red"},children:"Has\u0142a nie s\u0105 identyczne"}),d.length<6&&Object(j.jsx)("p",{style:{color:"red"},children:"Minimum 6 znak\xf3w"})]}),Object(j.jsx)(k,{classes:"buttonGreen",disabled:!y,click:function(){var t={email:i,password:d,returnSecureToken:!0};if(e.registration){S("https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyCE9iNHzKkGA9SWX9TD4JvTXBEtyCxovdA",t)}else{S("https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyCE9iNHzKkGA9SWX9TD4JvTXBEtyCxovdA",t)}},children:e.registration?"Zarejestruj":"Zaloguj"})]})})},T=function(){var e=Object(a.useContext)(_),t=Object(a.useState)(!1),n=Object(r.a)(t,2),s=n[0],i=n[1],l=Object(a.useState)(!1),u=Object(r.a)(l,2),d=u[0],O=u[1];return Object(a.useEffect)((function(){e.expirationDate&&(console.log(e.expirationDate.getTime()-(new Date).getTime()),setTimeout((function(){e.loginOff()}),e.expirationDate.getTime()-(new Date).getTime()))}),[e.expirationDate]),Object(j.jsxs)("div",{className:o.a.toolbar,children:[Object(j.jsx)("span",{className:o.a.kanban,children:"JAPAN KANBAN"}),e.isAuth?Object(j.jsxs)(c.a.Fragment,{children:[Object(j.jsx)(b,{text:"Wyloguj",click:function(){e.loginOff()}}),Object(j.jsx)("span",{className:o.a.right,children:e.email})]}):Object(j.jsxs)(c.a.Fragment,{children:[Object(j.jsx)(b,{text:"Zaloguj",click:function(){i(!1),O(!0)}}),Object(j.jsx)(b,{text:"Zarejestruj",click:function(){i(!0),O(!0)}})]}),d&&Object(j.jsx)(S,{registration:s,clickX:function(){return O(!1)}})]})},D=n(4),E=n(3),A=n(8),w=n.n(A),P=n(7),R=n.n(P),B=n(6),z=n(10),F=n.n(z),G=n(17),H=n.n(G),L=function(e){return Object(j.jsx)("div",{className:H.a.backdrop,children:Object(j.jsxs)("div",{className:H.a.modal,children:[Object(j.jsxs)("h1",{children:[e.alert,"?"]}),Object(j.jsx)(k,{classes:e.clLeft,click:e.ok,children:e.left}),Object(j.jsx)(k,{classes:e.clRight,click:e.cancel,children:e.right})]})})},J=function(e){var t=Object(a.useState)(!1),n=Object(r.a)(t,2),c=n[0],s=n[1],i=Object(a.useState)(!1),l=Object(r.a)(i,2),o=l[0],u=l[1];return Object(j.jsx)(B.b,{draggableId:e.identyTask,index:e.index,children:function(t,n){return Object(j.jsxs)("div",Object(D.a)(Object(D.a)({className:F.a.task},t.draggableProps),{},{ref:t.innerRef,style:Object(D.a)(Object(D.a)({},t.draggableProps.style),{},{userSelect:"none",backgroundColor:n.isDragging?"#FFFAB4":"#F0D892"}),children:[Object(j.jsxs)("header",{className:F.a.header,children:[Object(j.jsx)("span",Object(D.a)(Object(D.a)({className:F.a.left},t.dragHandleProps),{},{children:"\u2630"})),Object(j.jsx)("span",{onClick:function(){return u(!0)},className:F.a.right,children:"\u2612"})]}),Object(j.jsx)("input",{type:"checkbox",checked:c,onChange:function(e){s(e.target.checked)}}),Object(j.jsx)("p",{className:c?F.a.line:null,children:e.name}),o&&Object(j.jsx)(L,{alert:"Usun\u0105\u0107 Zadanie ".concat(e.name,"?"),ok:function(){return e.removeTask(e.identyList,e.identyTask)},cancel:function(){return u(!1)},left:"Usu\u0144",clLeft:"buttonRed",right:"Anuluj",clRight:"buttonGreen"})]}))}},e.identyTask)},K=function(e){var t=Object(a.useState)(""),n=Object(r.a)(t,2),c=n[0],s=n[1],i=Object(a.useState)(!1),l=Object(r.a)(i,2),o=l[0],u=l[1];return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("header",{className:R.a.header,children:[Object(j.jsx)("span",Object(D.a)(Object(D.a)({className:R.a.left},e.dragHandleProps),{},{children:"\u2630"})),Object(j.jsx)("span",{onClick:function(){return u(!0)},className:R.a.right,children:"\u2612"}),Object(j.jsx)("p",{className:R.a.label,children:e.name})]}),Object(j.jsx)(B.c,{droppableId:e.identy,type:"task",children:function(t,n){return Object(j.jsxs)("div",Object(D.a)(Object(D.a)({className:R.a.drop},t.droppableProps),{},{ref:t.innerRef,style:{backgroundColor:n.isDraggingOver?"#C87550":"#EA9772"},children:[e.tasks.map((function(t,n){return Object(j.jsx)(J,{name:t.name,identyList:e.identy,identyTask:t.id,removeTask:e.removeTask,index:n},t.id)})),t.placeholder]}))}},e.identy),Object(j.jsx)("div",{className:R.a.flexGrow,children:Object(j.jsxs)("div",{className:R.a.adding,children:[Object(j.jsx)(g,{type:"text",value:c,onChange:function(e){return s(e.target.value)},placeholder:"nazwa zadania"}),Object(j.jsx)(k,{click:function(){e.addTask(e.identy,c),s("")},classes:"buttonCol",disabled:""===c,children:"Dodaj Zadanie"})]})}),o&&Object(j.jsx)(L,{alert:"Usun\u0105\u0107 Liste ".concat(e.name,"?"),ok:function(){return e.removeColumn(e.identy)},cancel:function(){return u(!1)},left:"Usu\u0144",clLeft:"buttonRed",right:"Anuluj",clRight:"buttonGreen"})]})},X=function(e){var t=Object(a.useState)(""),n=Object(r.a)(t,2),s=n[0],i=n[1];return Object(j.jsxs)(c.a.Fragment,{children:[Object(j.jsx)(g,{type:"text",value:s,onChange:function(e){return i(e.target.value)},placeholder:"nazwa kolumny"}),Object(j.jsx)(k,{click:function(){e.add(s),i("")},classes:"buttonCol",disabled:""===s,children:"Dodaj Kolumne"})]})},Z=function(){var e=Object(a.useState)(!1),t=Object(r.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(!1),i=Object(r.a)(s,2),l=i[0],o=i[1],u=Object(a.useState)(null),d=Object(r.a)(u,2),j=d[0],b=d[1],O=Object(a.useState)(null),h=Object(r.a)(O,2),f=h[0],x=h[1],g=Object(a.useState)(null),p=Object(r.a)(g,2),m=p[0],k=p[1],_=Object(a.useState)(null),v=Object(r.a)(_,2),I=v[0],N=v[1];return{saveData:function(e,t,n){c(!0),b(null),x(null),k(null),N(null),y.a.put("https://kanban-hooks-default-rtdb.firebaseio.com/users/".concat(e,".json?auth=").concat(n),t).then((function(e){b(e),c(!1)})).catch((function(e){x(e),c(!1)}))},fatchData:function(e,t){o(!0),k(null),N(null),b(null),x(null),y.a.get("https://kanban-hooks-default-rtdb.firebaseio.com/users/".concat(e,".json?auth=").concat(t)).then((function(e){k(e),o(!1)})).catch((function(e){N(e),o(!1)}))},responseSend:j,errorSend:f,responseFatch:m,errorFatch:I,sending:n,fatching:l}},U=function(){var e=Object(a.useContext)(_),t=Object(a.useState)([]),n=Object(r.a)(t,2),s=n[0],i=n[1],l=function(e){var t=Object(E.a)(s);t.push({name:e,id:e+(new Date).getTime(),order:t.length,tasks:[]}),i(Object(E.a)(t))},o=function(e){var t=Object(E.a)(s),n=s.findIndex((function(t){return e===t.id}));t.splice(n,1),i(Object(E.a)(t))},u=function(e,t){var n=s.findIndex((function(t){return e===t.id})),a=Object(E.a)(s);a[n].tasks.push({name:t,id:t+(new Date).getTime(),order:a[n].tasks.length}),i(Object(E.a)(a))},d=function(e,t){var n=s.findIndex((function(t){return e===t.id})),a=Object(E.a)(s),c=a[n].tasks.findIndex((function(e){return t===e.id}));a[n].tasks.splice(c,1),i(Object(E.a)(a))},b=Z(),O=b.saveData,h=b.fatchData,f=b.sending,x=b.errorSend,g=b.responseSend,p=b.fatching,m=b.errorFatch,k=b.responseFatch;return Object(a.useEffect)((function(){e.isAuth&&O(e.userId,s,e.token)}),[s]),Object(a.useEffect)((function(){e.isAuth&&h(e.userId,e.token)}),[e.isAuth]),Object(a.useEffect)((function(){if(k&&k.data){console.log(k.data);var e=Object(E.a)(k.data);e.map((function(e){e.tasks||(e.tasks=[])})),console.log(e),i(e)}}),[k]),Object(j.jsx)("div",{className:w.a.mainBox,children:e.isAuth&&Object(j.jsxs)(c.a.Fragment,{children:[Object(j.jsx)(B.a,{onDragEnd:function(e){return function(e,t,n){var a=e.source,c=e.destination,s=e.type;if(c){if("task"!==s){console.log(e);var i=Object(E.a)(t),l=i.splice(a.index,1),o=Object(r.a)(l,1)[0];return i.splice(c.index,0,o),void n(Object(E.a)(i))}if(a.droppableId===c.droppableId){var u=t.findIndex((function(e){return e.id===a.droppableId})),d=Object(E.a)(t),j=Object(E.a)(d[u].tasks),b=j.splice(a.index,1),O=Object(r.a)(b,1)[0];j.splice(c.index,0,O),d[u].tasks=Object(E.a)(j),n(Object(E.a)(d))}else{var h=t.findIndex((function(e){return e.id===a.droppableId})),f=t.findIndex((function(e){return e.id===c.droppableId})),x=Object(E.a)(t),g=Object(E.a)(x[h].tasks),p=Object(E.a)(x[f].tasks),m=g.splice(a.index,1),k=Object(r.a)(m,1)[0];p.splice(c.index,0,k),x[h].tasks=Object(E.a)(g),x[f].tasks=Object(E.a)(p),n(Object(E.a)(x))}}}(e,s,i)},children:Object(j.jsx)(B.c,{droppableId:"main",type:"column",direction:"horizontal",children:function(e,t){return Object(j.jsxs)("div",Object(D.a)(Object(D.a)({className:w.a.kanban},e.droppableProps),{},{ref:e.innerRef,style:{},children:[s.map((function(e,t){return Object(j.jsx)(B.b,{draggableId:e.id,index:t,children:function(t,n){return Object(j.jsx)("div",Object(D.a)(Object(D.a)({className:w.a.column},t.draggableProps),{},{ref:t.innerRef,style:Object(D.a)(Object(D.a)({},t.draggableProps.style),{},{userSelect:"none",backgroundColor:n.isDragging?"#fba883":"#EA9772"}),children:Object(j.jsx)(K,{dragHandleProps:t.dragHandleProps,identy:e.id,name:e.name,tasks:e.tasks,addTask:u,removeTask:d,removeColumn:o},e.id)}))}},e.id)})),e.placeholder,Object(j.jsx)("div",{className:w.a.columnAdd,children:Object(j.jsx)("div",{className:w.a.itemNew,children:Object(j.jsx)(X,{add:l})})})]}))}})}),Object(j.jsxs)("div",{className:w.a.infoBox,children:[f&&"Zapisuje zmiany...",g&&"Zapisano zmiany",x&&Object(j.jsx)("span",{style:{color:"red"},children:"'Zmian nie uda\u0142o si\u0119 zapisa\u0107!'"}),p&&"Pobieram Dane...",k&&"Dane Pobrane",m&&"Danych nie uda\u0142o si\u0119 pobra\u0107"]})]})})};var M=function(){var e=Object(a.useState)(!1),t=Object(r.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(null),i=Object(r.a)(s,2),l=i[0],o=i[1],u=Object(a.useState)(null),d=Object(r.a)(u,2),b=d[0],O=d[1],h=Object(a.useState)(null),f=Object(r.a)(h,2),x=f[0],g=f[1],p=Object(a.useState)(null),m=Object(r.a)(p,2),k=m[0],v=m[1];return Object(j.jsx)(_.Provider,{value:{isAuth:n,userId:l,token:b,expirationDate:x,email:k,loginOn:function(e,t,n,a){c(!0),o(e),O(t),g(n),v(a)},loginOff:function(){c(!1),o(null),O(null),g(null),v(null)}},children:Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(T,{}),Object(j.jsx)(U,{})]})})};i.a.render(Object(j.jsx)(M,{}),document.getElementById("root"))},7:function(e,t,n){e.exports={label:"ExistingColumn_label__3Jyut",header:"ExistingColumn_header__2Qcb7",right:"ExistingColumn_right__PwONT",left:"ExistingColumn_left__wE5Pr",flexGrow:"ExistingColumn_flexGrow__1u7kE",adding:"ExistingColumn_adding__QEQ_s",drop:"ExistingColumn_drop__27Q69"}},8:function(e,t,n){e.exports={mainBox:"Kanban_mainBox__BCgyx",kanban:"Kanban_kanban__2WLUc",column:"Kanban_column__2Cq7V",columnAdd:"Kanban_columnAdd__eQ6MC",itemNew:"Kanban_itemNew__2BkD7",infoBox:"Kanban_infoBox__2Ww4_"}}},[[66,1,2]]]);
//# sourceMappingURL=main.1d71253d.chunk.js.map