(this["webpackJsonpreact-kanban-hooks"]=this["webpackJsonpreact-kanban-hooks"]||[]).push([[0],{14:function(e,t,n){e.exports={toolbar:"Toolbar_toolbar__3BG8J",right:"Toolbar_right__3ItuG",kanban:"Toolbar_kanban__3MvL0"}},16:function(e,t,n){e.exports={auth:"Auth_auth__IdtOT",rightX:"Auth_rightX__2YET4"}},17:function(e,t,n){e.exports={dialog:"Dialog_dialog__qnKKC",TextArea:"Dialog_TextArea__2lCgN"}},28:function(e,t,n){e.exports={naviItem:"NaviItem_naviItem__1JpnJ"}},29:function(e,t,n){e.exports={input:"Input_input__HkNJD"}},30:function(e,t,n){e.exports={buttonCol:"Button_buttonCol__2B-wr",buttonGreen:"Button_buttonGreen__31YEf",buttonRed:"Button_buttonRed__2CAlo"}},31:function(e,t,n){e.exports={modal:"Modal_modal__30MRu"}},32:function(e,t,n){e.exports={backdrop:"BackDrop_backdrop__3kMM4"}},39:function(e,t,n){},40:function(e,t,n){},6:function(e,t,n){e.exports={label:"ExistingColumn_label__3Jyut",header:"ExistingColumn_header__2Qcb7",right:"ExistingColumn_right__PwONT",left:"ExistingColumn_left__wE5Pr",flexGrow:"ExistingColumn_flexGrow__1u7kE",adding:"ExistingColumn_adding__QEQ_s",drop:"ExistingColumn_drop__27Q69"}},68:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),i=n(10),s=n.n(i),r=(n(39),n(2)),o=(n(40),n(14)),l=n.n(o),u=n(28),d=n.n(u),j=n(1),b=function(e){return Object(j.jsx)("div",{className:d.a.naviItem,onClick:e.click,children:Object(j.jsx)("p",{children:e.text})})},O=n(16),f=n.n(O),h=n(29),x=n.n(h),m=function(e){return Object(j.jsx)("input",{className:x.a.input,type:e.type,value:e.value,onChange:e.onChange,placeholder:e.placeholder,onKeyDown:e.onKeyDown})},p=n(30),g=n.n(p),k=function(e){return Object(j.jsx)("button",{className:g.a[e.classes],onClick:e.click,disabled:e.disabled,children:e.children})},_=c.a.createContext({isAuth:!1,userId:null,token:null,expirationDate:null}),v=n(12),y=n.n(v),C={token:null,userId:null,error:null,time:null,email:null,loading:!1},N=function(e,t){switch(t.type){case"SEND":return{token:null,userId:null,error:null,time:null,email:null,loading:!0};case"RESPONSE":return{token:t.token,userId:t.userId,error:null,time:t.time,email:t.email,loading:!1};case"ERROR":return{error:t.error,loading:!1};case"LOGOUT":return{token:null,userId:null,error:null,time:null,email:null,loading:!1};default:return}},I=function(){var e=Object(a.useReducer)(N,C),t=Object(r.a)(e,2),n=t[0],c=t[1];return{sendAuth:function(e,t){c({type:"SEND"}),y.a.post(e,t).then((function(e){c({type:"RESPONSE",token:e.data.idToken,time:new Date((new Date).getTime()+1e3*e.data.expiresIn-2e3),email:e.data.email,userId:e.data.localId})})).catch((function(e){c({type:"ERROR",error:e.message})}))},error:n.error,token:n.token,time:n.time,email:n.email,userId:n.userId,loading:n.loading,logout:function(){c({type:"LOGOUT"}),console.log(n.userId)}}},S=function(e){var t=Object(a.useContext)(_),n=Object(a.useState)(""),i=Object(r.a)(n,2),s=i[0],o=i[1],l=Object(a.useState)(""),u=Object(r.a)(l,2),d=u[0],b=u[1],O=Object(a.useState)(""),h=Object(r.a)(O,2),x=h[0],p=h[1],g=Object(a.useState)(!1),v=Object(r.a)(g,2),y=v[0],C=v[1],N=I(),S=N.sendAuth,T=N.error,D=N.token,A=N.time,w=N.email,E=N.userId,R=N.loading,P=Object(a.useCallback)((function(e,n,a,c){t.loginOn(e,n,a,c)}),[t]);Object(a.useEffect)((function(){e.registration?C(d===x&&d.length>5&&""!==s):C(d.length>5&&""!==s)}),[e.registration,d,x,s]),Object(a.useEffect)((function(){E&&P(E,D,A,w),console.log(E)}),[E,D,A,w,P]);var z=function(){var t={email:s,password:d,returnSecureToken:!0};if(e.registration){S("https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyCE9iNHzKkGA9SWX9TD4JvTXBEtyCxovdA",t)}else{S("https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyCE9iNHzKkGA9SWX9TD4JvTXBEtyCxovdA",t)}},B=function(e){13===e.keyCode&&z()};return!t.userId&&Object(j.jsx)("div",{className:f.a.auth,children:R?Object(j.jsx)("p",{children:"Oczekujemy na serwer!"}):Object(j.jsxs)(c.a.Fragment,{children:[Object(j.jsx)("span",{onClick:e.clickX,className:f.a.rightX,children:"\u2612"}),T&&Object(j.jsx)("p",{style:{color:"red"},children:"Podano B\u0142\u0119dne dane spr\xf3buj jeszcze raz."}),Object(j.jsx)("p",{children:"Login:"}),Object(j.jsx)(m,{value:s,onChange:function(e){return o(e.target.value)},type:"text"}),Object(j.jsx)("p",{children:"Has\u0142o:"}),Object(j.jsx)(m,{value:d,onChange:function(e){return b(e.target.value)},type:"password",onKeyDown:function(e){return B(e)}}),e.registration&&Object(j.jsxs)(c.a.Fragment,{children:[Object(j.jsx)("p",{children:"Powt\xf3rz Has\u0142o:"}),Object(j.jsx)(m,{value:x,onChange:function(e){return p(e.target.value)},type:"password",onKeyDown:function(e){return B(e)}}),d!==x&&Object(j.jsx)("p",{style:{color:"red"},children:"Has\u0142a nie s\u0105 identyczne"}),d.length<6&&Object(j.jsx)("p",{style:{color:"red"},children:"Minimum 6 znak\xf3w"})]}),Object(j.jsx)(k,{classes:"buttonGreen",disabled:!y,click:z,children:e.registration?"Zarejestruj":"Zaloguj"})]})})},T=c.a.memo(S),D=function(){var e=Object(a.useContext)(_),t=Object(a.useState)(!1),n=Object(r.a)(t,2),i=n[0],s=n[1],o=Object(a.useState)(!1),u=Object(r.a)(o,2),d=u[0],O=u[1];return Object(a.useEffect)((function(){e.expirationDate&&setTimeout((function(){e.loginOff()}),e.expirationDate.getTime()-(new Date).getTime())}),[e.expirationDate,e]),Object(j.jsxs)("div",{className:l.a.toolbar,children:[Object(j.jsx)("span",{className:l.a.kanban,children:"JAPAN KANBAN"}),e.isAuth?Object(j.jsxs)(c.a.Fragment,{children:[Object(j.jsx)(b,{text:"Wyloguj",click:function(){e.loginOff()}}),Object(j.jsx)("span",{className:l.a.right,children:e.email})]}):Object(j.jsxs)(c.a.Fragment,{children:[Object(j.jsx)(b,{text:"Zaloguj",click:function(){s(!1),O(!0)}}),Object(j.jsx)(b,{text:"Zarejestruj",click:function(){s(!0),O(!0)}})]}),d&&Object(j.jsx)(T,{registration:i,clickX:function(){return O(!1)}})]})},A=n(4),w=n(3),E=n(9),R=n.n(E),P=n(6),z=n.n(P),B=n(7),K=n(8),L=n.n(K),G=n(31),F=n.n(G),Z=n(32),H=n.n(Z),J=function(e){return Object(j.jsx)("div",{className:H.a.backdrop,onClick:e.click,children:e.children})},X=function(e){return Object(j.jsxs)("div",{children:[Object(j.jsx)(J,{click:e.cancel}),Object(j.jsxs)("div",{className:F.a.modal,children:[Object(j.jsxs)("h1",{children:[e.alert,"?"]}),Object(j.jsxs)("div",{children:[Object(j.jsx)(k,{classes:e.clLeft,click:e.ok,children:e.left}),Object(j.jsx)(k,{classes:e.clRight,click:e.cancel,children:e.right})]})]})]})},U=n(17),M=n.n(U),W=function(e){var t=Object(a.useState)(e.name),n=Object(r.a)(t,2),c=n[0],i=n[1],s=Object(a.useState)(e.description),o=Object(r.a)(s,2),l=o[0],u=o[1],d=function(){e.ok(e.identyList,c,e.identyTask,l),e.cancel()},b=function(e){13===e.keyCode&&d()};return Object(j.jsxs)("div",{children:[Object(j.jsx)(J,{click:e.cancel}),Object(j.jsxs)("div",{className:M.a.dialog,children:[Object(j.jsx)("h1",{children:e.alert}),Object(j.jsx)(m,{type:"text",value:c,onChange:function(e){return i(e.target.value)},placeholder:"nowa nazwa listy",onKeyDown:function(e){return b(e)}}),Object(j.jsx)("p",{children:"Opis zadania"}),Object(j.jsx)("textarea",{className:M.a.TextArea,value:l,onChange:function(e){return u(e.target.value)},placeholder:"opis zadania",onKeyDown:function(e){return b(e)}}),Object(j.jsxs)("div",{children:[Object(j.jsx)(k,{classes:e.clLeft,click:d,children:e.left}),Object(j.jsx)(k,{classes:e.clRight,click:e.cancel,children:e.right})]})]})]})},Q=c.a.createContext({}),V=function(e){var t=Object(a.useState)(!1),n=Object(r.a)(t,2),c=n[0],i=n[1],s=Object(a.useState)(!1),o=Object(r.a)(s,2),l=o[0],u=o[1],d=Object(a.useState)(!1),b=Object(r.a)(d,2),O=b[0],f=b[1],h=Object(a.useContext)(Q);return Object(j.jsx)(B.b,{draggableId:e.identyTask,index:e.index,children:function(t,n){return Object(j.jsxs)("div",Object(A.a)(Object(A.a)({className:L.a.task},t.draggableProps),{},{ref:t.innerRef,style:Object(A.a)(Object(A.a)({},t.draggableProps.style),{},{userSelect:"none",backgroundColor:n.isDragging?"#FFFAB4":"#F0D892"}),children:[Object(j.jsxs)("header",{className:L.a.header,children:[Object(j.jsx)("span",Object(A.a)(Object(A.a)({className:L.a.left},t.dragHandleProps),{},{children:"\u2630"})),Object(j.jsx)("span",{onClick:function(){return u(!0)},className:L.a.right,children:"\u2612"}),Object(j.jsx)("span",{className:L.a.right,onClick:function(){return f(!0)},children:"..."})]}),Object(j.jsx)("input",{className:L.a.Checkbox,type:"checkbox",checked:c,onChange:function(e){i(e.target.checked)}}),Object(j.jsx)("p",{className:c?L.a.line:null,children:e.name}),l&&Object(j.jsx)(X,{alert:"Usun\u0105\u0107 Zadanie: ".concat(e.name,"?"),ok:function(){return h.removeTask(e.identyList,e.identyTask)},cancel:function(){return u(!1)},left:"Usu\u0144",clLeft:"buttonRed",right:"Anuluj",clRight:"buttonGreen"}),O&&Object(j.jsx)(W,{alert:"Edycja Zadania: ".concat(e.name,"."),ok:h.editTask,cancel:function(){return f(!1)},left:"Zmie\u0144",clLeft:"buttonRed",right:"Anuluj",clRight:"buttonGreen",identyList:e.identyList,identyTask:e.identyTask,name:e.name,description:e.description})]}))}},e.identyTask)},q=c.a.memo(V),Y=function(e){var t=Object(a.useState)(""),n=Object(r.a)(t,2),c=n[0],i=n[1],s=Object(a.useState)(!1),o=Object(r.a)(s,2),l=o[0],u=o[1],d=Object(a.useState)(!1),b=Object(r.a)(d,2),O=b[0],f=b[1],h=Object(a.useContext)(Q),x=function(){h.addTask(e.identy,c),i("")};return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("header",{className:z.a.header,children:[Object(j.jsx)("span",Object(A.a)(Object(A.a)({className:z.a.left},e.dragHandleProps),{},{children:"\u2630"})),Object(j.jsx)("span",{onClick:function(){return u(!0)},className:z.a.right,children:"\u2612"}),Object(j.jsx)("span",{className:z.a.right,onClick:function(){return f(!0)},children:"..."}),Object(j.jsx)("p",{className:z.a.label,children:e.name})]}),Object(j.jsx)(B.c,{droppableId:e.identy,type:"task",children:function(t,n){return Object(j.jsxs)("div",Object(A.a)(Object(A.a)({className:z.a.drop},t.droppableProps),{},{ref:t.innerRef,style:{backgroundColor:n.isDraggingOver?"#C87550":"#EA9772"},children:[e.tasks.map((function(t,n){return Object(j.jsx)(q,{name:t.name,identyList:e.identy,identyTask:t.id,description:t.description,index:n},t.id)})),t.placeholder]}))}},e.identy),Object(j.jsx)("div",{className:z.a.flexGrow,children:Object(j.jsxs)("div",{className:z.a.adding,children:[Object(j.jsx)(m,{type:"text",value:c,onChange:function(e){return i(e.target.value)},placeholder:"nazwa zadania",onKeyDown:function(e){return function(e){13===e.keyCode&&x()}(e)}}),Object(j.jsx)(k,{click:x,classes:"buttonCol",disabled:""===c,children:"Dodaj Zadanie"})]})}),l&&Object(j.jsx)(X,{alert:"Usun\u0105\u0107 Liste ".concat(e.name,"?"),ok:function(){return h.removeColumn(e.identy)},cancel:function(){return u(!1)},left:"Usu\u0144",clLeft:"buttonRed",right:"Anuluj",clRight:"buttonGreen"}),O&&Object(j.jsx)(W,{alert:"Edycja Listy ".concat(e.name,"?"),ok:h.editColumnName,cancel:function(){return f(!1)},left:"Zmie\u0144",clLeft:"buttonRed",right:"Anuluj",clRight:"buttonGreen",identy:e.identy,name:e.name})]})},$=c.a.memo(Y),ee=function(e){var t=Object(a.useState)(""),n=Object(r.a)(t,2),i=n[0],s=n[1],o=function(){e.add(i),s("")};return Object(j.jsxs)(c.a.Fragment,{children:[Object(j.jsx)(m,{type:"text",value:i,onChange:function(e){return s(e.target.value)},placeholder:"nazwa kolumny",onKeyDown:function(e){return function(e){13===e.keyCode&&o()}(e)}}),Object(j.jsx)(k,{click:o,classes:"buttonCol",disabled:""===i,children:"Dodaj Kolumne"})]})},te=function(){var e=Object(a.useState)(!1),t=Object(r.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(!1),s=Object(r.a)(i,2),o=s[0],l=s[1],u=Object(a.useState)(null),d=Object(r.a)(u,2),j=d[0],b=d[1],O=Object(a.useState)(null),f=Object(r.a)(O,2),h=f[0],x=f[1],m=Object(a.useState)(null),p=Object(r.a)(m,2),g=p[0],k=p[1],_=Object(a.useState)(null),v=Object(r.a)(_,2),C=v[0],N=v[1];return{saveData:Object(a.useCallback)((function(e,t,n){c(!0),b(null),x(null),k(null),N(null),y.a.put("https://kanban-hooks-default-rtdb.firebaseio.com/users/".concat(e,".json?auth=").concat(n),t).then((function(e){b(e),c(!1)})).catch((function(e){x(e),c(!1)}))}),[]),fatchData:Object(a.useCallback)((function(e,t){l(!0),k(null),N(null),b(null),x(null),y.a.get("https://kanban-hooks-default-rtdb.firebaseio.com/users/".concat(e,".json?auth=").concat(t)).then((function(e){k(e),l(!1)})).catch((function(e){N(e),l(!1)}))}),[]),responseSend:j,errorSend:h,responseFatch:g,errorFatch:C,sending:n,fatching:o}},ne=function(){console.log("Kanban Rendering");var e=Object(a.useContext)(_),t=Object(a.useState)([]),n=Object(r.a)(t,2),i=n[0],s=n[1],o=function(e){var t=Object(w.a)(i);t.push({name:e,id:e+(new Date).getTime(),tasks:[]}),s(Object(w.a)(t))},l=te(),u=l.saveData,d=l.fatchData,b=l.sending,O=l.errorSend,f=l.responseSend,h=l.fatching,x=l.errorFatch,m=l.responseFatch;return Object(a.useEffect)((function(){e.isAuth&&u(e.userId,i,e.token)}),[i,e.userId,e.token,u,e.isAuth]),Object(a.useEffect)((function(){e.isAuth&&d(e.userId,e.token)}),[e.isAuth,e.userId,e.token,d]),Object(a.useEffect)((function(){if(m&&m.data){console.log(m.data);var e=Object(w.a)(m.data);e.map((function(e){return e.tasks||(e.tasks=[]),!1})),console.log(e),s(e)}}),[m]),Object(j.jsx)(Q.Provider,{value:{removeColumn:function(e){var t=Object(w.a)(i),n=i.findIndex((function(t){return e===t.id}));t.splice(n,1),s(Object(w.a)(t))},addTask:function(e,t){var n=i.findIndex((function(t){return e===t.id})),a=Object(w.a)(i),c=Object(w.a)(a[n].tasks);c.push({name:t,id:t+(new Date).getTime(),descripton:""}),a[n].tasks=Object(w.a)(c),s(Object(w.a)(a))},removeTask:function(e,t){var n=i.findIndex((function(t){return e===t.id})),a=Object(w.a)(i),c=a[n].tasks.findIndex((function(e){return t===e.id})),r=Object(w.a)(a[n].tasks);r.splice(c,1),a[n].tasks=Object(w.a)(r),s(Object(w.a)(a))},editColumnName:function(e,t){var n=i.findIndex((function(t){return e===t.id})),a=Object(w.a)(i);a[n].name=t,s(Object(w.a)(a))},editTask:function(e,t,n,a){var c=i.findIndex((function(t){return e===t.id})),r=Object(w.a)(i),o=r[c].tasks.findIndex((function(e){return n===e.id})),l=Object(w.a)(r[c].tasks);l[o].name=t,l[o].description=a,r[c].tasks=Object(w.a)(l),s(Object(w.a)(r))}},children:Object(j.jsx)("div",{className:R.a.mainBox,children:e.isAuth&&Object(j.jsxs)(c.a.Fragment,{children:[Object(j.jsx)(B.a,{onDragEnd:function(e){return function(e,t,n){var a=e.source,c=e.destination,i=e.type;if(c){if("task"!==i){console.log(e);var s=Object(w.a)(t),o=s.splice(a.index,1),l=Object(r.a)(o,1)[0];return s.splice(c.index,0,l),void n(Object(w.a)(s))}if(a.droppableId===c.droppableId){var u=t.findIndex((function(e){return e.id===a.droppableId})),d=Object(w.a)(t),j=Object(w.a)(d[u].tasks),b=j.splice(a.index,1),O=Object(r.a)(b,1)[0];j.splice(c.index,0,O),d[u].tasks=Object(w.a)(j),n(Object(w.a)(d))}else{var f=t.findIndex((function(e){return e.id===a.droppableId})),h=t.findIndex((function(e){return e.id===c.droppableId})),x=Object(w.a)(t),m=Object(w.a)(x[f].tasks),p=Object(w.a)(x[h].tasks),g=m.splice(a.index,1),k=Object(r.a)(g,1)[0];p.splice(c.index,0,k),x[f].tasks=Object(w.a)(m),x[h].tasks=Object(w.a)(p),n(Object(w.a)(x))}}}(e,i,s)},children:Object(j.jsx)(B.c,{droppableId:"main",type:"column",direction:"horizontal",children:function(e,t){return Object(j.jsxs)("div",Object(A.a)(Object(A.a)({className:R.a.kanban},e.droppableProps),{},{ref:e.innerRef,style:{},children:[i.map((function(e,t){return Object(j.jsx)(B.b,{draggableId:e.id,index:t,children:function(t,n){return Object(j.jsx)("div",Object(A.a)(Object(A.a)({className:R.a.column},t.draggableProps),{},{ref:t.innerRef,style:Object(A.a)(Object(A.a)({},t.draggableProps.style),{},{userSelect:"none",backgroundColor:n.isDragging?"#fba883":"#EA9772"}),children:Object(j.jsx)($,{dragHandleProps:t.dragHandleProps,identy:e.id,name:e.name,tasks:e.tasks},e.id)}))}},e.id)})),e.placeholder,Object(j.jsx)("div",{className:R.a.columnAdd,children:Object(j.jsx)("div",{className:R.a.itemNew,children:Object(j.jsx)(ee,{add:o})})})]}))}})}),Object(j.jsxs)("div",{className:R.a.infoBox,children:[b&&"Zapisuje zmiany...",f&&"Zapisano zmiany",O&&Object(j.jsx)("span",{style:{color:"red"},children:"'Zmian nie uda\u0142o si\u0119 zapisa\u0107!'"}),h&&"Pobieram Dane...",m&&"Dane Pobrane",x&&"Danych nie uda\u0142o si\u0119 pobra\u0107"]})]})})})},ae=c.a.memo(ne);var ce=function(){var e=Object(a.useState)(!1),t=Object(r.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(null),s=Object(r.a)(i,2),o=s[0],l=s[1],u=Object(a.useState)(null),d=Object(r.a)(u,2),b=d[0],O=d[1],f=Object(a.useState)(null),h=Object(r.a)(f,2),x=h[0],m=h[1],p=Object(a.useState)(null),g=Object(r.a)(p,2),k=g[0],v=g[1];return Object(j.jsx)(_.Provider,{value:{isAuth:n,userId:o,token:b,expirationDate:x,email:k,loginOn:function(e,t,n,a){c(!0),l(e),O(t),m(n),v(a)},loginOff:function(){c(!1),l(null),O(null),m(null),v(null)}},children:Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(D,{}),Object(j.jsx)(ae,{})]})})};s.a.render(Object(j.jsx)(ce,{}),document.getElementById("root"))},8:function(e,t,n){e.exports={task:"Task_task__1IAtP",Checkbox:"Task_Checkbox__3cBkW",line:"Task_line__1Vjz-",header:"Task_header__6BdSV",right:"Task_right__3l3Gl",left:"Task_left__3dgkP"}},9:function(e,t,n){e.exports={mainBox:"Kanban_mainBox__BCgyx",kanban:"Kanban_kanban__2WLUc",column:"Kanban_column__2Cq7V",columnAdd:"Kanban_columnAdd__eQ6MC",itemNew:"Kanban_itemNew__2BkD7",infoBox:"Kanban_infoBox__2Ww4_"}}},[[68,1,2]]]);
//# sourceMappingURL=main.1fc70024.chunk.js.map